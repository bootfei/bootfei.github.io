<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>springboot-1.入门 | BootFei&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Springboot基础创建工程Spring Initializr -&gt; packaging:jar -&gt; selected dependencies: web Spring Initializr -&gt; packaging:war -&gt; selected dependencies: web 配置文件Spring Boot 的主配置文件可使用 application.yml">
<meta property="og:type" content="article">
<meta property="og:title" content="springboot-1.入门">
<meta property="og:url" content="http://example.com/2020/12/03/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/springboot/springboot-01-%E5%85%A5%E9%97%A8/index.html">
<meta property="og:site_name" content="BootFei&#39;s Blog">
<meta property="og:description" content="Springboot基础创建工程Spring Initializr -&gt; packaging:jar -&gt; selected dependencies: web Spring Initializr -&gt; packaging:war -&gt; selected dependencies: web 配置文件Spring Boot 的主配置文件可使用 application.yml">
<meta property="og:locale">
<meta property="article:published_time" content="2020-12-03T04:12:59.000Z">
<meta property="article:modified_time" content="2021-05-12T06:52:49.291Z">
<meta property="article:author" content="Fei Qi">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="BootFei&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">BootFei&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-编程语言/Java/springboot/springboot-01-入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/12/03/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/springboot/springboot-01-%E5%85%A5%E9%97%A8/" class="article-date">
  <time datetime="2020-12-03T04:12:59.000Z" itemprop="datePublished">2020-12-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      springboot-1.入门
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Springboot基础"><a href="#Springboot基础" class="headerlink" title="Springboot基础"></a>Springboot基础</h1><h2 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h2><p>Spring Initializr -&gt; packaging:jar -&gt; selected dependencies: web</p>
<p>Spring Initializr -&gt; packaging:war -&gt; selected dependencies: web</p>
<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>Spring Boot 的主配置文件可使用 application.yml 文件。</p>
<p>application.properties 与 application.yml 这两个文件只能有一个。要 求文件名必须为 application。</p>
<h2 id="Actuator-监控器"><a href="#Actuator-监控器" class="headerlink" title="Actuator 监控器"></a><strong>Actuator</strong> 监控器</h2><h3 id="基本环境搭建"><a href="#基本环境搭建" class="headerlink" title="基本环境搭建"></a>基本环境搭建</h3><h4 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">	&lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">	&lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<h4 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">management.server.port=9999</span></span><br><span class="line"><span class="comment">#指定server的基本路径</span></span><br><span class="line"><span class="string">management.server.servlet.context-path=/xxx</span></span><br><span class="line"><span class="comment">#指定监控终端的基本路径，默认为/actuator</span></span><br><span class="line"><span class="string">management.endpoints.web.base-path=/base</span></span><br></pre></td></tr></table></figure>

<h4 id="测试访问health"><a href="#测试访问health" class="headerlink" title="测试访问health"></a>测试访问health</h4><p>Localhost:9999/xxx/base/health</p>
<h3 id="添加info信息"><a href="#添加info信息" class="headerlink" title="添加info信息"></a>添加info信息</h3><h4 id="修改配置文件-1"><a href="#修改配置文件-1" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><p>在配置文件中添加如下 Info 信息，则可以通过 info 监控终端查看到。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#自定义info信息</span></span><br><span class="line"><span class="string">info.company.name=com.abc</span></span><br><span class="line"><span class="string">info.company.url=http://com.abc.www</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#从pom.xml文件中读取数值</span></span><br><span class="line"><span class="string">info.project.groupid=@project.groupId@</span></span><br><span class="line"><span class="string">info.project.artifactid=@project.artifactId@</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="访问测试info"><a href="#访问测试info" class="headerlink" title="访问测试info"></a>访问测试info</h4><p>Localhost:9999/xxx/base/info</p>
<h3 id="开放其他监控终端"><a href="#开放其他监控终端" class="headerlink" title="开放其他监控终端"></a>开放其他监控终端</h3><p>默认情况下，Actuator 仅开放了 health 与 info 两个监控终端，但其还有很多终端可用，不过，需要手工开放。</p>
<h4 id="修改配置文件-2"><a href="#修改配置文件-2" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">management.endpoints.web.exposure.include=*</span> <span class="comment">#开放所有终端</span></span><br></pre></td></tr></table></figure>

<h4 id="测试访问"><a href="#测试访问" class="headerlink" title="测试访问"></a>测试访问</h4><ul>
<li><strong>mappings</strong> 终端: <ul>
<li>Localhost:9999/xxx/base/mappings</li>
<li>通过 mappings 终端，可以看到当前工程中所有的 URI 与处理器的映射关系，及详细的 处理器方法及其映射规则。很实用。</li>
</ul>
</li>
<li><strong>beans</strong> 终端: <ul>
<li>Localhost:9999/xxx/base/beans</li>
<li>可以查看到当前应用中所有的对象信息。</li>
</ul>
</li>
<li><strong>env</strong> 终端<ul>
<li>Localhost:9999/xxx/base/env</li>
<li>查看运行环境</li>
</ul>
</li>
</ul>
<h3 id="关闭其他监控终端"><a href="#关闭其他监控终端" class="headerlink" title="关闭其他监控终端"></a>关闭其他监控终端</h3><h4 id="修改配置文件-3"><a href="#修改配置文件-3" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">management.endpoints.web.exposure.exclude=env,beans</span> <span class="comment">#关闭env,beans终端</span></span><br></pre></td></tr></table></figure>

<h4 id="测试访问-1"><a href="#测试访问-1" class="headerlink" title="测试访问"></a>测试访问</h4><h1 id="Springboot重要用法"><a href="#Springboot重要用法" class="headerlink" title="Springboot重要用法"></a>Springboot重要用法</h1><h2 id="自定义异常页面"><a href="#自定义异常页面" class="headerlink" title="自定义异常页面"></a>自定义异常页面</h2><p>对于 404、405、500 等异常状态，服务器会给出默认的异常页面，而这些异常页面一般 都是英文的，且非常不友好。我们可以通过简单的方式使用自定义异常页面，并将默认状态 码页面进行替换。</p>
<h3 id="定义目录"><a href="#定义目录" class="headerlink" title="定义目录"></a>定义目录</h3><p>在 src/main/resources 目录下再定义新的目录 public/error，必须是这个目录名称。</p>
<h3 id="定义异常页面"><a href="#定义异常页面" class="headerlink" title="定义异常页面"></a>定义异常页面</h3><p>在 error 目录中定义异常页面。这些异常页面的名称必须为相应的状态码，扩展名为 html。如404.html, 500.html</p>
<h2 id="多环境选择"><a href="#多环境选择" class="headerlink" title="多环境选择"></a>多环境选择</h2><ul>
<li>相同代码运行在不同环境<ul>
<li>开发、测试、生产 环境等。每个环境的数据库地址、服务器端口号等配置都会不同</li>
<li>此时就需要定义出不同的配置信息，在不同的环境中选择不同的配置。</li>
</ul>
</li>
<li>不同环境执行不同实现类<ul>
<li>在开发应用时，有时不同的环境，需要运行的接口的实现类也是不同的。例如，若要开发一个具有短信发送功能的应用，开发环境中要执行的 send()方法仅需调用短信模拟器即可， 而生产环境中要执行的 send()则需要调用短信运营商所提供的短信发送接口。</li>
<li>此时就需要开发两个相关接口的实现类去实现 send()方法，然后在不同的环境中自动选 择不同的实现类去执行。</li>
</ul>
</li>
</ul>
<h3 id="多配置文件实现方式"><a href="#多配置文件实现方式" class="headerlink" title="多配置文件实现方式"></a>多配置文件实现方式</h3><p>在 src/main/resources 中再定义两个配置文件，分别对应开发环境application-dev.properties与生产环境application-prod.properties。</p>
<p>在 Spring Boot 中多环境配置文件名需要满足 application-{profile}.properties 的格式，其 中{profile}为对应的环境标识，例如</p>
<ul>
<li>application-dev.properties:开发环境 </li>
<li>application-test.properties:测试环境 </li>
<li>application-prod.properties:生产环境</li>
</ul>
<h4 id="相同代码运行在不同环境"><a href="#相同代码运行在不同环境" class="headerlink" title="相同代码运行在不同环境"></a>相同代码运行在不同环境</h4><p>至于哪个配置文件会被加载，则需要在 application.properties 文件中通过 spring.profiles.active 属性来设置，其值对应{profile}值。例如，spring.profiles.active=test 就会 加载 application-test.properties 配置文件内容。</p>
<p>在生产环境下，application.properties 中一般配置通用内容，并设置 spring.profiles.active 属性的值为 dev，即，直接指定要使用的配置文件为开发时的配置文件，而对于其它环境的 选择，一般是通过命令行方式去激活。配置文件 application-{profile}.properties 中则配置各个 环境的不同内容。</p>
<h4 id="不同环境执行不同实现类"><a href="#不同环境执行不同实现类" class="headerlink" title="不同环境执行不同实现类"></a>不同环境执行不同实现类</h4><p>在实现类上添加@Profile 注解，并在注解参数中指定前述配置文件中的{profile}值，用于指定该实现类所适用的环境。</p>
<ul>
<li>@Profile(“prod”)</li>
<li>@Profile(“dev”)</li>
</ul>
<h3 id="单配置文件实现方式（略，不实用）"><a href="#单配置文件实现方式（略，不实用）" class="headerlink" title="单配置文件实现方式（略，不实用）"></a>单配置文件实现方式（略，不实用）</h3><h2 id="读取自定义配置"><a href="#读取自定义配置" class="headerlink" title="读取自定义配置"></a>读取自定义配置</h2><p>自定义配置，可以是定义在主配置文件 application.properties 中的自定义属性，也可以 是自定义配置文件中的属性。</p>
<h3 id="读取主配置文件中的属性"><a href="#读取主配置文件中的属性" class="headerlink" title="读取主配置文件中的属性"></a>读取主配置文件中的属性</h3><p>在@Value 注解中通过${ }符号可以读取指定的属性值。</p>
<ul>
<li><p>修改主配置文件</p>
<ul>
<li>Student.name=’xiaoming’</li>
</ul>
</li>
<li><p>修改 <strong>SomeHandler</strong> 类</p>
<ul>
<li><pre><code class="java">@Value(&quot;$&#123;student.name&#125;&quot;)
private String name;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 读取指定配置文件中的属性</span><br><span class="line"></span><br><span class="line">一般情况下，[主配置文件]()中存放[系统中定义好的属性设置]()，而[自定义属性]()一般会写入[自定义的配置文件]()中。也就是说，Java 代码除了可以读取主配置文件中的属性外，还可以读取指定配置文件中的属性，可以通过@PropertySource 注解加载指定的配置文件。</span><br><span class="line"></span><br><span class="line">&gt; spring boot 官网给出说明，@PropertySource 注解不能加载 yml文件。所以其建议自定义配置文件就使用approperties文件。</span><br><span class="line"></span><br><span class="line">- 修改property配置文件: </span><br><span class="line"></span><br><span class="line">  - myapp.approperties</span><br><span class="line">  - 存放在 src&#x2F;main&#x2F;resources 目录中</span><br><span class="line">  - student.name&#x3D;&quot;张三&quot;</span><br><span class="line"></span><br><span class="line">- 修改controller类:</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;java</span><br><span class="line">    @PropertySource(value&#x3D;&quot;classpath:myapp.approperties&quot;,encoding&#x3D;&quot;UTF-8&quot;)</span><br><span class="line">    pulibc class testController&#123;</span><br><span class="line">      @Value(&quot;$&#123;student.name&#125;&quot;)</span><br><span class="line">    	private String name;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

​    
</code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="读取对象属性"><a href="#读取对象属性" class="headerlink" title="读取对象属性"></a>读取对象属性</h3><ul>
<li>@ProertySource用于指定要读取的配置文件</li>
<li>@ConfigurationProperties用于指定要读取配置文件中的对象属性，即指定要读取的配置文件属性的前辍</li>
<li>@Component表示当前从配置文件读取来的对象，由Spring容器创建 </li>
<li>要保证类的属性名要与配置文件中的对象属性名相同</li>
</ul>
<p>修改property配置文件: </p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">student.id=&quot;0100&quot;</span></span><br><span class="line"><span class="string">student.name=&quot;张三&quot;</span></span><br><span class="line"><span class="string">student.class=&quot;三班&quot;</span></span><br></pre></td></tr></table></figure>

<p>修改自义配置属性类:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@PropertySource(&quot;classpath:myapp.approperties&quot;)</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(&quot;student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">student</span></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> String <span class="class"><span class="keyword">class</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="读取List-lt-String-gt-属性"><a href="#读取List-lt-String-gt-属性" class="headerlink" title="读取List&lt; String &gt;属性"></a>读取List&lt; String &gt;属性</h3><ul>
<li><p>导入依赖</p>
<ul>
<li><p>注解@ConfigurationProperties 注解需要以下依赖。</p>
</li>
<li><pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 修改自定义配置文件</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;xml</span><br><span class="line">    country.cities[0]&#x3D;beijing</span><br><span class="line">    country.cities[1]&#x3D;shanghai</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><p>定义配置属性类</p>
<ul>
<li><pre><code class="java">@Component
@PropertySource(&quot;classpath:myapp.approperties&quot;)
@ConfigurationProperties(&quot;country&quot;)
public class Country&#123;
  private List&lt;String&gt; cities;
&#125;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 读取 **List&lt; Object &gt;**属性</span><br><span class="line"></span><br><span class="line">- 修改自定义配置文件</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;yaml</span><br><span class="line">    group.students[0].name &#x3D; &quot;张三&quot;</span><br><span class="line">    group.students[0].id &#x3D; 01</span><br><span class="line">    </span><br><span class="line">    group.students[1].name &#x3D; &quot;李四&quot;</span><br><span class="line">    group.students[1].id &#x3D; 02</span><br></pre></td></tr></table></figure>


</code></pre>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>定义配置属性类</p>
<ul>
<li><pre><code class="java">@Component
@PropertySource(&quot;classpath:myapp.approperties&quot;)
@ConfigurationProperties(&quot;group&quot;)
public class Group&#123;
  private List&lt;Student&gt; students;
&#125;

//不需要添加任何注解
public class Student&#123;
  String name;
  String id;
&#125;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">##  **Spring Boot** 下使用 **JSP** 页面</span><br><span class="line"></span><br><span class="line">&gt; 在 Spring Boot 下直接使用 JSP 文件，其是无法解析的，需要做专门的配置。</span><br><span class="line">&gt;</span><br><span class="line">&gt; [无法解析]()意味着访问该文件路径会下载该文件，而不是展示在页面</span><br><span class="line"></span><br><span class="line">- 创建目录：</span><br><span class="line"></span><br><span class="line">  - 在 src&#x2F;main 下创建 webapp 目录，用于存放 jsp 文件。这就是一个普通的目录，无需执行 Mark Directory As。</span><br><span class="line"></span><br><span class="line">- 创建 **index.jsp** :</span><br><span class="line"></span><br><span class="line">  - [指定 **web** 资源目录](): 在 spring boot 工程中若要创建 jsp 文件，一般是需要在 src&#x2F;main 下创建 webapp 目录， 然后在该目录下创建 jsp 文件。但发现没有创建 jsp 文件的选项。此时，需要打开 Project Structrue 窗口，将 webapp 目录指定为 web 资源目录，点击右下角的加号，然后才可以创建 jsp 文件。</span><br><span class="line">  - 创建 **index** 页面：在webapp目录下创建index.jsp页面</span><br><span class="line"></span><br><span class="line">- [添加tomcat内置的jsp解析器]()：</span><br><span class="line"></span><br><span class="line">  - 添加 **jasper** 依赖, jsp 引擎是用于解析 jsp 文件的， 即将 jsp 文件解析为 Servlet 是由 jsp 引擎完成的。</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;xml</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">    	&lt;groupId&gt;org.apache.tomcat.embed tomcat-embed-jasper&lt;&#x2F;groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;tomcat-embed-jasper&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><p><a href="">注册资源目录</a>:</p>
<ul>
<li><p>在 pom 文件中将 webapp 目录注册为资源目录。若不注册，那么target中就没有该资源，也就是说无法访问。</p>
</li>
<li><pre><code class="xml">&lt;build&gt;
 &lt;resources&gt;
   &lt;resource&gt;
       &lt;directory&gt;src/main/webapp&lt;/directory&gt;
     &lt;targetPath&gt;META-INFO/resources&lt;/targetPath&gt;
     &lt;includes&gt;
       &lt;include&gt;**/*.*&lt;/include&gt;
     &lt;/includes&gt;
   &lt;/resource&gt;
 &lt;/resources&gt;
&lt;/build&gt;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- Controller类：</span><br><span class="line"></span><br><span class="line">  - &#x2F;test&#x2F;register&#x2F;</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;</span><br><span class="line">    return &quot;jsp&#x2F;welcome.jsp&quot;;</span><br></pre></td></tr></table></figure>


</code></pre>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>路由访问：</p>
<ul>
<li><a href="">Iocalhost:8000/index.jsp</a> :访问到index.jsp页面</li>
<li><a href="">Iocalhost:8000/test/register.jsp</a> : 访问到welcome.jsp页面</li>
</ul>
</li>
</ul>
<h2 id="Spring-Boot-的事务支持"><a href="#Spring-Boot-的事务支持" class="headerlink" title="Spring Boot 的事务支持"></a><strong>Spring Boot</strong> 的事务支持</h2><p>若工程直接或间接依赖于 spring-tx，则框架会自动注入 DataSourceTransactionManager事务管理器;若依赖于 spring-boot-data-jpa，则会自动注入 JpaTransactionManager。</p>
<ul>
<li><p>Spring对事务的实现：</p>
<ul>
<li>运行时异常，回滚</li>
<li>受检查异常，提交；如果希望回滚，使用@Transactional（rollbackFor = Exception.class）</li>
</ul>
</li>
<li><p>修改启动类</p>
<ul>
<li><pre><code class="java">@EnableTranscationManagement //开启事务
public class Application&#123;

&#125;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 修改 **Service** 实现类</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;java</span><br><span class="line">    @Transactional</span><br><span class="line">    public void addStudent(Student s) throw Exception&#123;</span><br><span class="line">    	dao.insert(s);</span><br><span class="line">    	&#x2F;&#x2F;int i&#x3D;0; &#x2F;&#x2F;运行时异常，回滚</span><br><span class="line">    	throw new Exception();&#x2F;&#x2F;受检查异常，提交</span><br><span class="line">    	dao.insert(s);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>
<h2 id="Spring-Boot-对日志的控制"><a href="#Spring-Boot-对日志的控制" class="headerlink" title="Spring Boot 对日志的控制"></a><strong>Spring Boot</strong> 对日志的控制</h2><p>Spring Boot 中使用的日志技术为 logback。其与 Log4J 都出自同一人，性能要优于 Log4J， 是 Log4J 的替代者。</p>
<ul>
<li><p>添加依赖</p>
</li>
<li><p>在 Spring Boot 中若要使用 logback，则需要具有 spring-boot-starter-logging 依赖，而该依 赖被 spring-boot-starter-web 所依赖，即不用直接导入 spring-boot-starter-logging 依赖。</p>
</li>
<li><p>添加配置文件</p>
<ul>
<li><p>该文件名为 logback.xml，且必须要放在 src/main/resources 类路径下。</p>
</li>
<li><pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration scan=&quot;true&quot; scanPeriod=&quot;60 seconds&quot; debug=&quot;false&quot; &gt;
   &lt;!-- 上下文名称：取项目名称 --&gt;
   &lt;contextName&gt;tlogback&lt;/contextName&gt;
   &lt;!-- 时间戳格式 --&gt;
   &lt;timestamp key=&quot;myDateFormat&quot; datePattern=&quot;yyyy-MM-dd HH:mm:ss&quot;/&gt;
   &lt;!-- 属性，以$&#123;key&#125;引用 --&gt;
   &lt;property name=&quot;path&quot; value=&quot;D:/log&quot;/&gt;

   &lt;appender name=&quot;stdout&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot; &gt;
       &lt;encoder&gt;
           &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%t] [%p] %logger - %line - %msg%n&lt;/pattern&gt;
       &lt;/encoder&gt;
   &lt;/appender&gt;

   &lt;appender name=&quot;file&quot; class=&quot;ch.qos.logback.core.FileAppender&quot;&gt;
       &lt;file&gt;$&#123;path&#125;/tlogback.log&lt;/file&gt;
       &lt;append&gt;true&lt;/append&gt;
       &lt;encoder&gt;
           &lt;pattern&gt;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%t] [%p] %logger - %line - %msg%n&lt;/pattern&gt;
       &lt;/encoder&gt;
   &lt;/appender&gt;

   &lt;!-- 为某个包，或某各类特别指定级别和appender,additivity表示是否向上级传递msg --&gt;
   &lt;logger name=&quot;com.abc.dao&quot; level=&quot;debug&quot; additivity=&quot;false&quot;&gt;
       &lt;appender-ref ref=&quot;stdout&quot;/&gt;
   &lt;/logger&gt;

   &lt;!-- 顶层的logger,为所有的类记录日志 --&gt;
   &lt;root&gt;
       &lt;appender-ref ref=&quot;stdout&quot;/&gt;
       &lt;appender-ref ref=&quot;file&quot;/&gt;
   &lt;/root&gt;

&lt;/configuration&gt;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## Spring boot中使用线程池</span><br><span class="line"></span><br><span class="line">- 配置类</span><br><span class="line"></span><br><span class="line">  - 使用@Configuration和@EnableAsync这两个注解，表示这是个配置类，并且是线程池的配置类</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;java</span><br><span class="line">    @Configuration</span><br><span class="line">    @EnableAsync</span><br><span class="line">    public class ExecutorConfig &#123;</span><br><span class="line">        @Bean(name &#x3D; &quot;asyncServiceExecutor&quot;)</span><br><span class="line">        public Executor asyncServiceExecutor() &#123;</span><br><span class="line">            logger.info(&quot;start asyncServiceExecutor&quot;);</span><br><span class="line">            ThreadPoolTaskExecutor executor &#x3D; new ThreadPoolTaskExecutor();</span><br><span class="line">            &#x2F;&#x2F;配置核心线程数</span><br><span class="line">            executor.setCorePoolSize(corePoolSize);</span><br><span class="line">            &#x2F;&#x2F;配置最大线程数</span><br><span class="line">            executor.setMaxPoolSize(maxPoolSize);</span><br><span class="line">            &#x2F;&#x2F;配置队列大小</span><br><span class="line">            executor.setQueueCapacity(queueCapacity);</span><br><span class="line">            &#x2F;&#x2F;配置线程池中的线程的名称前缀</span><br><span class="line">            executor.setThreadNamePrefix(namePrefix);</span><br><span class="line">    </span><br><span class="line">            &#x2F;&#x2F; rejection-policy：当pool已经达到max size的时候，如何处理新任务</span><br><span class="line">            &#x2F;&#x2F; CALLER_RUNS：不在新线程中执行任务，而是有调用者所在的线程来执行</span><br><span class="line">            executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());</span><br><span class="line">            &#x2F;&#x2F;执行初始化</span><br><span class="line">            executor.initialize();</span><br><span class="line">            return executor;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><p>实现类</p>
<ul>
<li>将Service层的服务异步化，在executeAsync()方法上增加注解@Async(“asyncServiceExecutor”)，asyncServiceExecutor方法是前面ExecutorConfig.java中的方法名，表明executeAsync方法进入的线程池是asyncServiceExecutor方法创建的。</li>
</ul>
</li>
<li><p>增强实现类的功能：在每次提交线程的时候都会将当前线程池的运行状况打印出来</p>
<ul>
<li><p>Override父类的execute、submit等方法，在里面调用showThreadPoolInfo()方法</p>
</li>
<li><pre><code class="java">        private void showThreadPoolInfo(String prefix) &#123;
        ThreadPoolExecutor threadPoolExecutor = getThreadPoolExecutor();

        if (null == threadPoolExecutor) &#123;
            return;
        &#125;

        logger.info(&quot;&#123;&#125;, &#123;&#125;,taskCount [&#123;&#125;], completedTaskCount [&#123;&#125;], activeCount [&#123;&#125;], queueSize [&#123;&#125;]&quot;,
                this.getThreadNamePrefix(),
                prefix,
                threadPoolExecutor.getTaskCount(),
                threadPoolExecutor.getCompletedTaskCount(),
                threadPoolExecutor.getActiveCount(),
                threadPoolExecutor.getQueue().size());
    &#125;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## **Spring Boot** 下使用拦截器</span><br><span class="line"></span><br><span class="line">&gt; 在非 Spring Boot 工程中若要使用 SpringMVC 的拦截器，在定义好拦截器后，需要在 Spring 配置文件中对其进行注册。但 Spring Boot 工程中没有了 Spring 配置文件，那么如何使用拦截器呢?</span><br><span class="line">&gt;</span><br><span class="line">&gt; Spring Boot 对于原来在配置文件配置的内容，现在全部体现在一个类中，该类需要继承 自 WebMvcConfigurationSupport 类，并使用@Configuration 进行注解，表示该类为一个 JavaConfig 类，其充当配置文件的角色。</span><br><span class="line"></span><br><span class="line">- 定义拦截器</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;java</span><br><span class="line">    public class SomeInterceptor extends HandlerInterceptor&#123;</span><br><span class="line">        public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;</span><br><span class="line">            String path &#x3D; request.getServletPath();</span><br><span class="line">            if (path.matches(Const.NO_INTERCEPTOR_PATH)) &#123;</span><br><span class="line">            	&#x2F;&#x2F;不需要的拦截直接过</span><br><span class="line">                return true;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">            	&#x2F;&#x2F; 这写你拦截需要干的事儿，比如取缓存，SESSION，权限判断等</span><br><span class="line">                System.out.println(&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;);</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><p>定义配置文件类</p>
<ul>
<li><pre><code class="java">@Configuration
public class WebConfigurer implements WebMvcConfigurerSupport &#123;
     @Override
     public void addInterceptors(InterceptorRegistry registry) &#123;
        registry.addInterceptor(new SomeInterceptor())
          .addPathPatterns(&quot;/first/**&quot;);
          .excludePathPatterns(&quot;/second/**&quot;);
     &#125;
&#125;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##  **Spring Boot** 中使用 **Servlet**</span><br><span class="line"></span><br><span class="line">在 Spring Boot 中使用 Servlet，根据 Servlet 注册方式的不同，有两种使用方式。若使用 的是 Servlet3.0+版本，则两种方式均可使用;若使用的是 Servlet2.5 版本，则只能使用配置类方式。这里我们只记录Servlet3.0+版本。</span><br><span class="line"></span><br><span class="line">- 创建 **Servlet**</span><br><span class="line"></span><br><span class="line">  - @WebServlet</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;java</span><br><span class="line">    @WebServlet(urlPatterns &#x3D; &quot;&#x2F;some&quot;, asyncSupported &#x3D; true)</span><br><span class="line">    public class SomeServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">        protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">            System.out.println(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;CometServlet Request&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;);</span><br><span class="line">            doPost(req, resp);</span><br><span class="line">    </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><p>修改入口类</p>
<ul>
<li><p>在入口类中添加 Servlet 扫描注解。</p>
</li>
<li><pre><code class="java">@ServletComponentScan(&quot;com.abc.servlets&quot;)
public class Application&#123;&#125;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">## **Spring Boot** 中使用 **Filter**</span><br><span class="line"></span><br><span class="line">在 Spring Boot 中使用 Filter 与前面的使用 Servlet 相似，根据 Filter 注册方式的不同，有 两种使用方式。若使用的是 Servlet3.0+版本，则两种方式均可使用;若使用的是 Servlet2.5 版本，则只能使用配置类方式。</span><br><span class="line"></span><br><span class="line">- 创建filter</span><br><span class="line"></span><br><span class="line">  - @WebFilter</span><br><span class="line"></span><br><span class="line">  - &#96;&#96;&#96;java</span><br><span class="line">    @WebFilter(urlPatterns &#x3D; &quot;&#x2F;*&quot;)</span><br><span class="line">    public class SomeeFilter extends Filter &#123;</span><br><span class="line">    		@Override</span><br><span class="line">        protected void doFilter(HttpServletRequest req, HttpServletResponse resp, FilterChain chain) throws ServletException, IOException &#123;</span><br><span class="line">            System.out.println(&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;CometServlet Request&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;);</span><br><span class="line">            chain.doFilter(req,resp);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></code></pre>
</li>
</ul>
</li>
<li><p>修改入口类</p>
<ul>
<li><p>在入口类中添加 Servlet 扫描注解。</p>
</li>
<li><pre><code class="java">@ServletComponentScan(&quot;com.abc.filters&quot;)
public class Application&#123;&#125;
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">## 路径问题基础理论</span><br><span class="line"></span><br><span class="line">### 路径的构成</span><br><span class="line"></span><br><span class="line">路径由两部分构成:资源路径与资源名称。[即 路径 &#x3D; 资源路径 + 资源名称]()</span><br><span class="line"></span><br><span class="line">资源路径与资源名称的分水岭为:路径中的最后一个斜杠。斜杠的前面部分称为资源路径，后面部分称为资源名称。</span><br><span class="line"></span><br><span class="line">例如:</span><br><span class="line"></span><br><span class="line">- 请求路径:http:&#x2F;&#x2F;localhost:8080&#x2F;xxx&#x2F;test&#x2F;index</span><br><span class="line">- 资源路径:http:&#x2F;&#x2F;localhost:8080&#x2F;xxx&#x2F;test</span><br><span class="line">- 资源名称:index</span><br><span class="line"></span><br><span class="line">### 路径的分类</span><br><span class="line"></span><br><span class="line">根据是否可以唯一的定位一个资源，可以将路径划分为两类:绝对路径与相对路径。</span><br><span class="line"></span><br><span class="line">- 绝对路径:可以唯一的定位一个资源的路径。在Web应用中，一般使用URL形式表示。</span><br><span class="line"></span><br><span class="line">- 相对路径:仅依赖此路径无法唯一定位资源，但若为其指定一个参数路径，则可以将其转换为一个绝对路径，这样的路径称为相对路径。在 Web 应用中，一般使用 URI 形式表示。</span><br><span class="line">- 转换关系: 绝对路径 &#x3D; 参照路径 + 相对路径</span><br><span class="line"></span><br><span class="line">### 绝对路径分类</span><br><span class="line"></span><br><span class="line">根据路径作用的不同，可以将绝对路径分为:资源定义路径，与资源请求路径。</span><br><span class="line"></span><br><span class="line">- 资源定义路径:用于表示资源位置的路径。</span><br><span class="line"></span><br><span class="line">- 资源请求路径:客户端所发出的对指定资源的请求路径。</span><br><span class="line"></span><br><span class="line">### 相对路径分类</span><br><span class="line"></span><br><span class="line">根据相对路径是否以斜杠开头，可以划分为两类:</span><br><span class="line"></span><br><span class="line">- 斜杠路径：[又可以分为两类]() &lt;!--注意，这里是重点--&gt;</span><br><span class="line"></span><br><span class="line">  - 对于斜杠路径，根据其出现的位置的不同，可以划分为</span><br><span class="line">    - 前台路径:</span><br><span class="line">    - 出现在HTML、JS、CSS，及JSP文件的静态部分的斜杠路径。例如，&lt;img src&#x3D;&quot;&quot;&#x2F;&gt;等等</span><br><span class="line">      - 其参照路径为当前web服务器的根。</span><br><span class="line">    - 后台路径:</span><br><span class="line">      - 出现在Java代码、JSP文件的动态部分(Java代码块、JSP动作等)、XML、properties 等配置文件中</span><br><span class="line">      - 其参照路径为当前web应用的根。</span><br><span class="line">- 非杠路径：&lt;!--建议不用--&gt;</span><br><span class="line">  - 其参照路径为当前请求路径的资源路径。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 路径解析器</span><br><span class="line"></span><br><span class="line">相对路径，最终都会经过路径解析器，将其转换为绝对路径，以定义或定位一个资源。 不同的相对路径，其路径解析器也是不同的。</span><br><span class="line"></span><br><span class="line">-  前台路径:路径解析器为浏览器。</span><br><span class="line"></span><br><span class="line">- 后台路径:路径解析器为服务器。</span><br><span class="line"></span><br><span class="line">- 非杠路径:若非杠路径出现在前台路径位置，其路径解析器为浏览器; 若非杠路径出现在后台路径位置，其路径解析器为服务器。</span><br><span class="line"></span><br><span class="line">### 解析规则</span><br><span class="line"></span><br><span class="line">&gt; 不同的路径解析器，对同一个相对路径的解析结果是不同的。所谓解析结果，指的是将 相对路径所转换为的绝对路径。</span><br><span class="line">&gt;</span><br><span class="line">&gt; 由于 绝对路径 &#x3D; 参照路径 + 相对路径 ，所以不同的 解析器，会为相对路径匹配不同的参照路径。</span><br><span class="line">&gt;</span><br><span class="line">&gt; 换句话说就是，我们学习的重点是，浏览器、 服务器对于不同的相对路径所匹配的参照路径到底是谁。</span><br><span class="line"></span><br><span class="line">- 一般规则</span><br><span class="line">  </span><br><span class="line">  - 斜杆路径：</span><br><span class="line">    - 前台路径:其参照路径为当前web服务器的根。</span><br><span class="line">    - 后台路径:其参照路径为当前web应用的根。</span><br><span class="line">  - 非杠路径:其参照路径为当前请求路径的资源路径。</span><br><span class="line">  </span><br><span class="line">- 例子，请求路径: http:&#x2F;&#x2F;localhost:8080&#x2F;xxx&#x2F;test&#x2F;index</span><br><span class="line"></span><br><span class="line">  - 当前 web 服务器的根: http:&#x2F;&#x2F;localhost:8080</span><br><span class="line">  - 当前web应用的根: http:&#x2F;&#x2F;localhost:8080&#x2F;xxx</span><br><span class="line">  - 资源路径: http:&#x2F;&#x2F;localhost:8080&#x2F;xxx&#x2F;test</span><br><span class="line"></span><br><span class="line">- 特殊规则：</span><br><span class="line"></span><br><span class="line">  - 在代码中使用HttpServletResponse的sendRedirect()方法使用斜杠路径进行重定向时， 其参照路径按照之前规则，应该是当前 web 应用的根，但实际情况是，当前 web 服务器的根。</span><br><span class="line"></span><br><span class="line">  - 以上规则对于一次跳转是没有问题的，若跳转次数超过一次，则有可能会存在问题。</span><br><span class="line"></span><br><span class="line">  - 如何解决呢？</span><br><span class="line"></span><br><span class="line">    - &#96;&#96;&#96;java</span><br><span class="line">      response.sendRedirect(request.getContextPath()+&quot;&#x2F;html&#x2F;welcome.html&quot;);</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/03/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/springboot/springboot-01-%E5%85%A5%E9%97%A8/" data-id="cm6lrrho8006qnsdldy6p2xy7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/12/12/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/springcloud/spring-cloud-04-Hystrix%20%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD%E4%B8%8E%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          spring-cloud-4-Hystrix服务熔断与服务降级
        
      </div>
    </a>
  
  
    <a href="/2020/12/03/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/springboot/springboot%E5%B8%B8%E7%94%A8%E7%9A%84%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">springboot常用的打包方式</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/juc/">juc</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/java/juc/oom/">oom</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/oom/">oom</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/spring/">spring</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/" rel="tag">JDK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/annotation/" rel="tag">annotation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cluster/" rel="tag">cluster</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/interview/" rel="tag">interview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jstack/" rel="tag">jstack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/leetcode/" rel="tag">leetcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lock/" rel="tag">lock</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/net/" rel="tag">net</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/next/" rel="tag">next</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/" rel="tag">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reflect/" rel="tag">reflect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring-starter/" rel="tag">spring starter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springboot/" rel="tag">springboot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/startup/" rel="tag">startup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transaction/" rel="tag">transaction</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/virtual-machine/" rel="tag">virtual machine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vm/" rel="tag">vm</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JDK/" style="font-size: 11.11px;">JDK</a> <a href="/tags/annotation/" style="font-size: 10px;">annotation</a> <a href="/tags/cluster/" style="font-size: 10px;">cluster</a> <a href="/tags/git/" style="font-size: 12.22px;">git</a> <a href="/tags/hexo/" style="font-size: 12.22px;">hexo</a> <a href="/tags/interview/" style="font-size: 10px;">interview</a> <a href="/tags/java/" style="font-size: 20px;">java</a> <a href="/tags/jstack/" style="font-size: 14.44px;">jstack</a> <a href="/tags/leetcode/" style="font-size: 10px;">leetcode</a> <a href="/tags/lock/" style="font-size: 10px;">lock</a> <a href="/tags/mysql/" style="font-size: 16.67px;">mysql</a> <a href="/tags/net/" style="font-size: 10px;">net</a> <a href="/tags/next/" style="font-size: 11.11px;">next</a> <a href="/tags/redis/" style="font-size: 15.56px;">redis</a> <a href="/tags/reflect/" style="font-size: 10px;">reflect</a> <a href="/tags/spring-starter/" style="font-size: 10px;">spring starter</a> <a href="/tags/springboot/" style="font-size: 18.89px;">springboot</a> <a href="/tags/startup/" style="font-size: 17.78px;">startup</a> <a href="/tags/transaction/" style="font-size: 11.11px;">transaction</a> <a href="/tags/virtual-machine/" style="font-size: 12.22px;">virtual machine</a> <a href="/tags/vm/" style="font-size: 13.33px;">vm</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">March 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/17/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/spring/spring%E6%A1%86%E6%9E%B6-04-bean%E5%8C%85-Bean/">spring框架-04-bean包-Bean</a>
          </li>
        
          <li>
            <a href="/2022/04/19/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/jdk/JDK-util-HashMap/">JDK-util-HashMap</a>
          </li>
        
          <li>
            <a href="/2022/03/08/database/mysql/mysql-%E5%B8%B8%E8%A7%81%E4%BA%8B%E5%8A%A1%E5%9C%BA%E6%99%AF/">mysql - 常见事务问题解决方案</a>
          </li>
        
          <li>
            <a href="/2022/03/08/database/mysql/mysql-%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98/">mysql - 面试问题</a>
          </li>
        
          <li>
            <a href="/2021/11/20/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/%E4%BA%A4%E6%8D%A2%E6%8E%92%E5%BA%8F-%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F/">交换排序-冒泡排序</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2025 Fei Qi<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>